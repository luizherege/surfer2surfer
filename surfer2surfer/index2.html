<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Surfer 2 Surfer</title>
    <link href="jquery-mobile/styles/surfer.css" rel="stylesheet" />
    <link href="jquery-mobile/styles/jquery.mobile.structure-1.4.0.min.css" rel="stylesheet" />
    <link href="styles/main.css" rel="stylesheet" />

    <script src="cordova.js" type="text/javascript"></script>
    <script type="text/javascript" charset="utf-8" src="scripts/jquery.min.js"></script>
    <script src="jquery-mobile/js/jquery.mobile-1.4.0.min.js" type="text/javascript"></script>
</head>
<body> 
    
        <div data-role="page" id="box_estados_pg">
        <div data-role="header">
        	<h1>Estados</h1>
            <!-- Aqui ficará a logo futuramente  -->
        </div>
        
        <div id="box_estados" data-role="content">         
            <!-- Aqui entram os estados -->
        </div>
    	    
        <div data-role="footer">
        	<h1>Surfer 2 Surfer</h1>
        </div>
    </div>
    

    <script>
        var estados;
        var cidades;
        var praias;
        var notas;
		var cores;
        var tam;
        
        /*função para receber o json do servidor */
        function cores_receiver( array_cores )
        {			
			cores = array_cores;
        };
        
        /*função para receber o json do servidor */
        function notas_receiver( array_notas )
        {			
			notas = array_notas;
        };
        
        /* função para receber o json do servidor */
        function cidades_receiver( array_cidades )
        {
            cidades = array_cidades;           
        };
        
        function praias_receiver( array_praias )
        {
            praias = array_praias;
        };
        
        /*função para receber o json do servidor */
        function estados_receiver( array_estados )
        {
            var estado_ul = document.createElement( "ul" );
            estado_ul.setAttribute( "data-role", "listview" );
            estado_ul.setAttribute( "data-divider-theme", "a" );
            estado_ul.setAttribute( "data-inset", "true" );            
            estados = array_estados;
            
            for ( var i = 0; i < array_estados.length; i++ )
            {
                var estado = document.createElement( "li" );
                var cidades_div = document.createElement( "div");
            	cidades_div.setAttribute( "class", "ui-body" + " ui-body-a" + " ui-corner-all" );
                cidades_div.setAttribute( "id", "cidades_div_" + array_estados[i].id_estado );
                
                var estado_txt = document.createTextNode( array_estados[i].nome_estado );
                
                estado.appendChild( estado_txt );
                
                estado.className = "estado";               	               
                estado.setAttribute( "id", "estado_" + array_estados[i].id_estado );
                estado.setAttribute( "data-role", "list-divider" );                
               
                estado_ul.appendChild( estado );
                estado_ul.appendChild( cidades_div );
                
            }
			document.getElementById( "box_estados" ).appendChild( estado_ul );
            
            
            for ( var x = 0; x < cidades.length; x++ )
            {
                var cidade_ul = document.createElement( "ul" );                
                cidade_ul.setAttribute( "data-role", "listview" );
                cidade_ul.setAttribute( "data-divider-theme", "a" );
                cidade_ul.setAttribute( "data-inset", "true" );
                
                var cidade_li = document.createElement( "li" );
                var cidade_txt = document.createTextNode( cidades[x].nome_cidade );
                cidade_li.setAttribute( "data-role", "list-divider" );
                cidade_ul.setAttribute( "id", "cidade_ul_" + cidades[x].id_cidade );                
                cidade_li.className = "cidade_li";
                cidade_li.appendChild( cidade_txt );
                cidade_ul.appendChild( cidade_li );
                document.getElementById( "cidades_div_" + cidades[x].id_estado ).appendChild( cidade_ul );                 
            }
            
            for ( var v = 0; v < praias.length; v++ )
            { 
                var praia_li = document.createElement( "li" );
                var praia_grid = document.createElement( "div" );
                var praia_block = document.createElement( "div" );
                var nota_block = document.createElement( "div" );
                var praia = document.createElement( "a" );
                var nota_button = document.createElement( "a" );
                var praia_txt = document.createTextNode( praias[v].nome_praia );
               
                praia.appendChild( praia_txt );
                praia.className = "praia";					
                praia.setAttribute( "data-role", "button" );
                praia.setAttribute( "id", "praia_" + praias[v].id_praia );
                praia_li.appendChild( praia );
                for ( var cor = 0 ; cor < cores.length; cor++ )
                {
                    var nota_span = document.createElement ( "span" );							
                    var nota_node = document.createTextNode ( "0" );
                    nota_span.setAttribute( "class", "span_" + cor + "_" + praias[v].id_praia + " span_nota" );
                    nota_span.appendChild( nota_node );
                    praia.appendChild( nota_span );
                    nota_span.style.color = cores[cor].nota_cor ;
                    if ( cor < cores.length - 1  )
                    {	
                    var nota_sep = document.createElement ( "span" );
                    nota_sep.setAttribute( "class", "span_nota" );
                    var nota_sep_node = document.createTextNode ( " / " );
                    nota_sep.appendChild( nota_sep_node );
                    praia.appendChild( nota_sep );
                    }							
				}
                document.getElementById( "cidade_ul_" + praias[v].id_cidade ).appendChild( praia_li );
			}            
        };     
 
    </script>
    <script src="http://surfer2surfer.com.br/json_cores.php?callback=cores_receiver"></script>
    <script src="http://surfer2surfer.com.br/json_notas.php?callback=notas_receiver"></script>
    <script src="http://surfer2surfer.com.br/json_praias.php?callback=praias_receiver"></script>
    <script src="http://surfer2surfer.com.br/json_cidades.php?callback=cidades_receiver"></script>
    <script src="http://surfer2surfer.com.br/json_estados.php?callback=estados_receiver"></script>
    

    
</body>
</html>
