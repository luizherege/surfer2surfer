<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Surfer 2 Surfer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="jquery-mobile/styles/jquery.mobile-1.3.1.min.css" rel="stylesheet" />
    <link href="styles/main.css" rel="stylesheet" />

    <script src="cordova.js" type="text/javascript"></script>
    <script src="jquery-mobile/js/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="jquery-mobile/js/jquery.mobile-1.3.1.min.js" type="text/javascript"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>

    <script src="scripts/login.js" type="text/javascript"></script>
    <script src="scripts/location.js" type="text/javascript"></script>
</head>
<body>
    
    <div data-role="page" id="box_estados_head">
        <div data-role="header">
        	<h1>Estados</h1>
            <!-- Aqui ficarÃ¡ a logo futuramente  -->
        </div>
        
        <div id="box_estados" data-role="content">
            <!-- Aqui entram os estados -->
        </div>
        
        <div data-role="footer">
        	<h1>Surfer 2 Surfer</h1>
        </div>
    </div>

    <script>
        var estados;
        function estados_receiver( array_estados )
        {
            for ( var i = 0; i < array_estados.length; i++ )
            {
                var estado = document.createElement( "a" );
                var estado_txt = document.createTextNode( array_estados[i].nome_estado );
                
                estado.appendChild( estado_txt );
                
                estado.className = "estado";
               
                estado.setAttribute( "id", "estado_" + array_estados[i].estado_id );
                
                estado.setAttribute( "data-role", "button" );
               
                
                document.getElementById( "box_estados" ).appendChild( estado );
            }
			
			estados = array_estados;
        };
        
        function cidades_receiver( array_cidades )
        {
            for ( var x = 0 ; x < estados.length; x++ )
            {
             	var page = document.createElement( "div" );
                var page_header_div = document.createElement( "div" );
                var page_content = document.createElement( "div" );
                var page_footer_div = document.createElement( "div" );
                var page_header = document.createElement( "header" );
                var page_footer = document.createElement( "header" );
                var page_footer_txt = document.createTextNode( "Surfer 2 Surfer" );
				var page_header_txt = document.createTextNode( estados[x].nome_estado );
                
                page.appendChild( page_header_div );
                page.appendChild( page_content );
                page.appendChild( page_footer_div );
                page_header_div.appendChild( page_header );
                page_footer_div.appendChild( page_footer );
                page_footer.appendChild( page_footer_txt );
				page_header.appendChild( page_header_txt );
                
                page.setAttribute( "data-role", "page" );
                page.setAttribute( "id", "cidades_box_" + estados[x].estado_id  );
                page_content.setAttribute( "data-role", "content" );
                page_content.setAttribute( "id", "cidades_" + estados[x].estado_id );
                page_header_div.setAttribute( "data-role", "header" );
                page_footer_div.setAttribute( "data-role", "header" );
            
                document.body.appendChild( page ); 
                
                for ( var i = 0; i < array_cidades.length; i++ )
                { 
					if( array_cidades[i].estado_id > estados[x].estado_id )
					{
						break;
					}
					
					else if( array_cidades[i].estado_id < estados[x].estado_id )
					{
						continue;
					}
					
					else
					{
						var cidade = document.createElement( "a" );
						var cidade_txt = document.createTextNode( array_cidades[i].nome_cidade );
						
						cidade.appendChild( cidade_txt );
		 
						cidade.className = "cidade";
							
						cidade.setAttribute( "data-role", "button" );
						   
						document.getElementById( "cidades_" + array_cidades[i].estado_id ).appendChild( cidade );
					}
                   
                }
                
        		document.getElementById( "estado_" + estados[x].estado_id ).href = "#cidades_box_" + estados[x].estado_id ;
            }
        };
    </script>
    <script src="http://surfer2surfer.com.br/json_estados.php?callback=estados_receiver"></script>
    <script src="http://surfer2surfer.com.br/json_cidades.php?callback=cidades_receiver"></script>
    
</body>
</html>
